# Test Scenario: APPROVAL RESET WITH NO DUE DATE
# =============================================================================
# Tests approval reset behavior for chores with frequency="none" and NO due_date.
#
# Key Insight: From coordinator.py lines 7876 and 7912-7923:
# - Chores with frequency="none" are ALWAYS included in reset checks
# - If NO due_date exists, reset happens immediately (no date check blocks it)
#
# Expected Behavior:
# - When _process_approval_boundary() is called, these chores reset from
#   APPROVED → PENDING regardless of time elapsed
# - This applies to all three completion criteria types
#
# Contents:
#   - 2 assignees: TestAssignee1, TestAssignee2
#   - 1 approver: TestApprover
#   - 3 chores (one for each completion criteria):
#       * Independent: "No Due Date Independent"
#       * Shared First: "No Due Date Shared First"
#       * Shared All: "No Due Date Shared All"
# =============================================================================

system:
  points_label: "Points"
  points_icon: "mdi:star-outline"

assignees:
  - name: "Zoë"
    ha_user: "assignee1"
    dashboard_language: "en"
    mobile_notify_service: ""

  - name: "Max!"
    ha_user: "assignee2"
    dashboard_language: "en"
    mobile_notify_service: ""

approvers:
  - name: "Môm Astrid Stârblüm"
    ha_user: "approver1"
    assignees: ["Zoë", "Max!"]
    mobile_notify_service: ""

chores:
  # Test: INDEPENDENT chore with frequency="none", no due_date
  # Each assignee has their own instance - approval reset affects only that assignee
  - name: "No Due Date Independent"
    assigned_to: ["Zoë", "Max!"]
    points: 10.0
    icon: "mdi:checkbox-marked"
    completion_criteria: "independent"
    recurring_frequency: "none"
    auto_approve: false
    approval_reset_type: "at_midnight_once"
    # NO due_date field = chore resets immediately when _reset_daily_chore_statuses() runs

  # Test: SHARED_FIRST chore with frequency="none", no due_date
  # First to claim wins, others blocked - reset clears winner
  - name: "No Due Date Shared First"
    assigned_to: ["Zoë", "Max!"]
    points: 15.0
    icon: "mdi:account-star"
    completion_criteria: "shared_first"
    recurring_frequency: "none"
    auto_approve: false
    approval_reset_type: "at_midnight_once"
    # NO due_date field = chore resets immediately when _reset_daily_chore_statuses() runs

  # Test: SHARED_ALL chore with frequency="none", no due_date
  # All assignees must complete - reset affects all assignees
  - name: "No Due Date Shared All"
    assigned_to: ["Zoë", "Max!"]
    points: 20.0
    icon: "mdi:account-group"
    completion_criteria: "shared_all"
    recurring_frequency: "none"
    auto_approve: false
    approval_reset_type: "at_midnight_once"
    # NO due_date field = chore resets immediately when _reset_daily_chore_statuses() runs
# =============================================================================
# TEST EXPECTATIONS
# =============================================================================
# For all three chore types:
# 1. Assignee claims chore → state = CLAIMED
# 2. Approver approves → state = APPROVED, points awarded
# 3. Call _reset_daily_chore_statuses([const.FREQUENCY_DAILY])
#    (frequency="none" chores are ALWAYS included per line 7876)
# 4. Expected: state = PENDING, ready for next claim
#
# Key Implementation Detail:
# - If due_date_str is None/missing, the coordinator skips the date check
#   and proceeds directly to reset logic (lines 7912-7923)
# - This means "none" frequency + no due_date = instant reset eligibility
